



<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="zh"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang="zh"><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh"><![endif]-->
<!--[if gt IE 8]<!-->
<html class="no-js" lang="zh">
  <!--<![endif]-->
  <head>
    <meta charset="UTF-8">

    <title>
      Riding on Rails3 with full stack of Gems - @yorzi
    </title>

    <meta name="description" content="安迪的思考和分享">
    <meta name="keywords" content="<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="zh"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang="zh"><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh"><![endif]-->
<!--[if gt IE 8]<!-->
<html class="no-js" lang="zh">
  <!--<![endif]-->
  <head>
    <meta charset="UTF-8">

    <title>
      Riding on Rails3 with full stack of Gems - @yorzi
    </title>

    <meta name="description" content="安迪的思考和分享">
    <meta name="keywords" content="">
    <meta name="author" content="Andy Wang">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="cleartype" content="on">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <link rel="apple-touch-icon-precomposed" type="image/png" sizes="57x57" href="/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon-precomposed" type="image/png" sizes="72x72" href="/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" type="image/png" sizes="114x114" href="/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" type="image/png" sizes="144x144" href="/apple-touch-icon-144x144-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon-precomposed.png">
    <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">

    <link rel="icon" type="image/png" sizes="16x16" href="/wangyaodi.png">
    <link rel="shortcut icon" sizes="16x16" href="/wangyaodi.png">
    <link rel="alternate" type="application/rss+xml" title="@yorzi's Homepage" href="/feed.xml" />
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" href="/stylesheets/application.css">
    <script src="/javascripts/all.js"></script>
  </head>
  <body class="2011 2011_06 2011_06_14 2011_06_14_riding-on-rails3-with-full-stack-of-gems">
    <aside class="sidebar">
      <h1 class="site-name"><a href="/" style='color:rgb(162, 9, 9);'>@yorzi</a></h1>
      <nav class="global-nav">
        <ul>
          <li><a href="/profile.html">About</a></li>
          <li><a href="//resume.wangyaodi.com">Resume</a></li>
          <li><a href="/presentations.html">Presentations</a></li>
        </ul>
      </nav>

      <nav class="social-connect">
        <ul>
          <li><a href="//github.com/yorzi"><i class="icon-github"></i></a></li>
          <li><a href="//weibo.com/yorzi"><i class="icon-weibo"></i></a></li>
          <li><a href="//twitter.com/yorzi"><i class="icon-twitter"></i></a></li>
          <li><a href="//cn.linkedin.com/in/yorzi"><i class="icon-linkedin"></i></a></li>
        </ul>
      </nav>

      <!-- Ad -->
      <div class="block ad">
        <p class="block-cnt">A Theme By</p>
        <h4 class="block-title"><a href="//pragmatic.ly/">Pragmatic.ly</a></h4>
      </div>

    </aside>

    <section class="main">
      <div class="container">
        
  <div class="announcement">
    <p>
      
        <img class="avatar" src="/images/wangyaodi.png" alt="Andy Wang" />


      
    </p>
  </div>

  <article class="post single">

    <header>
  <h2 class="title">
    <a href="/2011/06/14/riding-on-rails3-with-full-stack-of-gems.html">Riding on Rails3 with full stack of Gems</a>
  </h2>
</header>

<aside class="aside-block">
  <ul class="meta">
    <li class="date">
      Jun 14, 2011
    </li>
    <li class="tags">
      
    </li>
  </ul>
</aside>

<div class="content">
  <p><strong>NOTICE:</strong> Below post was released a month ago on <a href="http://intridea.com/2011/5/13/rails3-gems">Intridea Company Blog</a>, also post here as a backup.</p>

<p>It&#39;s been close to a year since Rails3 came out. Luckily, I&#39;ve worked on several Rails3 projects after it&#39;s released, so I&#39;d like to share a stack of gems that I used in my previous projects. I guess they will give people a bit help while developing a new Rails3 app.</p>

<p>I don&#39;t want to explain too much on these gems separately, well, most of the gems have good documents on their project wiki(every great gem should be well documented, right?). Instead, I just add regarding links to their repos so that you&#39;d better take a further look while you really use it. In order to introduce the lists of gems clearly, I simply categorized them based on a rough structure.</p>

<p>Ok, here we start:</p>

<h4><strong>&raquo; Authentication</strong></h4>

<blockquote>
  <ul>
  <li>OmniAuth (<a href="https://github.com/intridea/omniauth">https://github.com/intridea/omniauth</a>)</li>
  <li>Devise (<a href="https://github.com/plataformatec/devise">https://github.com/plataformatec/devise</a>)</li>
  </ul>
</blockquote>

<p>The above two are really amazing gems to speed up your authentication. Yes, I love both of them in different cases: ideally OmniAuth is better for applications which want to support multi-provider external authentication, so I&#39;ve just added OmniAuth into RefactorMyCode Rails3 branch to take its auth benefits; Devise is totally powerful enough for classic authentication case. However, if you have too much your own business logic inside your login/registration/auth flow, you definitely need to make your own authentication.</p>

<h4><strong>&raquo; Access Control</strong></h4>

<blockquote>
  <ul>
  <li>CanCan (<a href="https://github.com/ryanb/cancan">https://github.com/ryanb/cancan</a>)</li>
  <li>declarative_authorization (<a href="https://github.com/stffn/declarative_authorization">https://github.com/stffn/declarative_authorization</a>)</li>
  </ul>
</blockquote>

<p><a href="https://github.com/ryanb">Ryan</a> is a star in Rails world, so his CanCan is really popular, which aims to do neat but powerful authorization. However, the declarative<em>autharization is also an option, actually, Ryan mentioned CanCan was inspired by declarative</em>autharization.</p>

<h4><strong>&raquo; Views/Page and Admin Scaffold</strong></h4>

<blockquote>
  <ul>
  <li>compass (<a href="https://github.com/chriseppstein/compass">https://github.com/chriseppstein/compass</a>)</li>
  <li>haml (<a href="https://github.com/nex3/haml">https://github.com/nex3/haml</a>)</li>
  <li>sanitize (<a href="https://github.com/rgrove/sanitize">https://github.com/rgrove/sanitize</a>)</li>
  <li>rails_admin (<a href="https://github.com/sferik/rails_admin">https://github.com/sferik/rails_admin</a>)</li>
  <li>web-app-theme (<a href="https://github.com/andreferraro/web-app-theme">https://github.com/andreferraro/web-app-theme</a>)</li>
  </ul>
</blockquote>

<p>From a front-end perspective, I suggest you might need to try above gems to speed up and simplify your UI designing. For example on the admin section, it&#39;d be great if you can apply your CRUD quickly to pages, that&#39;s what rails_admin does. Surely, these gems won&#39;t end all your UI problems, but it really helps when you doing prototype or being lack of some real designers.</p>

<h4><strong>&raquo; Quick SNS</strong></h4>

<blockquote>
  <ul>
  <li>acts-as-taggable-on (<a href="https://github.com/mbleigh/acts-as-taggable-on">https://github.com/mbleigh/acts-as-taggable-on</a>)</li>
  <li>has_friends-rails3 (<a href="https://github.com/rrouse/has_friends">https://github.com/rrouse/has_friends</a>)</li>
  <li>acts_as_favable (<a href="https://github.com/yorzi/acts_as_favable">https://github.com/yorzi/acts_as_favable</a>)</li>
  <li>thumbs_up (<a href="https://github.com/brady8/thumbs_up">https://github.com/brady8/thumbs_up</a>)</li>
  <li>acts_as_commentable (<a href="https://github.com/jackdempsey/acts_as_commentable">https://github.com/jackdempsey/acts_as_commentable</a>)</li>
  <li>profanity_filter (<a href="https://github.com/intridea/profanity_filter">https://github.com/intridea/profanity_filter</a>)</li>
  </ul>
</blockquote>

<p>Well, I don&#39;t mean a whole solution of SNS or regarding feature, here theses gems can help you add the basic cross-object function rapidly, it increases your confidence to focus on designing over programming at the very beginning. Here I want to give a simple introduction to <strong>acts<em>as</em>favable</strong>, it allows for favorites refer to be added to multiple and different models.</p>

<h4><strong>&raquo; Form and Related Tools</strong></h4>

<blockquote>
  <ul>
  <li>simple_form (<a href="https://github.com/plataformatec/simple_form">https://github.com/plataformatec/simple_form</a>)</li>
  <li>formtastic (<a href="https://github.com/justinfrench/formtastic">https://github.com/justinfrench/formtastic</a>)</li>
  <li>formtastic_datepicker_inputs (<a href="https://github.com/demersus/formtastic_datepicker_inputs">https://github.com/demersus/formtastic_datepicker_inputs</a>)</li>
  <li>tiny_mce (<a href="https://github.com/kete/tiny_mce">https://github.com/kete/tiny_mce</a>)</li>
  <li>paperclip (<a href="https://github.com/thoughtbot/paperclip">https://github.com/thoughtbot/paperclip</a>)</li>
  <li>carrierwave (<a href="https://github.com/jnicklas/carrierwave">https://github.com/jnicklas/carrierwave</a>)</li>
  </ul>
</blockquote>

<p>Most of above gems are famous through &lt;railscasts.com&gt; created by Ryan. There are two pairs of options here: <strong>simple_form</strong> and <strong>formtastic</strong> / <strong>paperclip</strong> and <strong>carrierwave</strong>. I like all these solutions, you should pick up one to fit your project, if you want to know differences between each pair, get more details on their wiki :) Tiny is an HUGE gem for rich editing, I list it here to remind its exist, but I recommend you  get the WYSWYG via some JS lib like <a href="http://premiumsoftware.net/cleditor">CLEditor</a>, it works gracefully.</p>

<h4><strong>&raquo; Searching Solutions</strong></h4>

<blockquote>
  <ul>
  <li>meta_seach (<a href="https://github.com/ernie/meta_search">https://github.com/ernie/meta_search</a>)</li>
  <li>meta_where (<a href="https://github.com/ernie/meta_where">https://github.com/ernie/meta_where</a>)</li>
  <li>thinking-sphinx (<a href="https://github.com/freelancing-god/thinking-sphinx">https://github.com/freelancing-god/thinking-sphinx</a>)</li>
  <li>acts_at_indexed (<a href="https://github.com/dougal/acts_as_indexed">https://github.com/dougal/acts_as_indexed</a>)</li>
  <li>sunspot (<a href="https://github.com/outoftime/sunspot">https://github.com/outoftime/sunspot</a>)</li>
  </ul>
</blockquote>

<p>Talking about searching in rails, I think you have many words to say. Here I wanna roughly split these gems into two types: Object-based searching and Full-Text searching. I heavily recommend you use meta<em>search and/or meta</em>where as your model based searching, it can convert your form params directly to a search solution, that&#39;s convenient. Full-Test searching depends on your case, but all these three gems(thinking-sphinx, acts<em>as</em>indexed, sunspot) are great.</p>

<h4><strong>&raquo; Pagination</strong></h4>

<blockquote>
  <ul>
  <li>kaminari (<a href="https://github.com/amatsuda/kaminari">https://github.com/amatsuda/kaminari</a>)</li>
  <li>kaminari_themes (<a href="https://github.com/amatsuda/kaminari_themes">https://github.com/amatsuda/kaminari_themes</a>)</li>
  </ul>
</blockquote>

<p>No more will_paginate in Rails3, absolutely, the only option is kaminari.</p>

<h4><strong>&raquo; Background Work</strong></h4>

<blockquote>
  <ul>
  <li>delayed_job (<a href="https://github.com/collectiveidea/delayed_job">https://github.com/collectiveidea/delayed_job</a>)</li>
  <li>resque (<a href="https://github.com/defunkt/resque">https://github.com/defunkt/resque</a>)</li>
  </ul>
</blockquote>

<p>There is one post to introduce resque clearly <a href="https://github.com/blog/542-introducing-resque">here</a>, in that post, github staff mentioned their brief history of doing background jobs, so I think you can understand well the differences between delayed_job and resque solution.</p>

<h4><strong>&raquo; Status Machine</strong></h4>

<blockquote>
  <ul>
  <li>workflow (<a href="https://github.com/ryan-allen/workflow">https://github.com/ryan-allen/workflow</a>)</li>
  <li>state_machine (<a href="https://github.com/pluginaweek/state_machine">https://github.com/pluginaweek/state_machine</a>)</li>
  </ul>
</blockquote>

<p>I like to use workflow a bit more, since it&#39;s much natural to me, you definitely need one status machine to control your stable flow stuff, such as a registration flow status or a wizard-like features.</p>

<h4><strong>&raquo; Rack API framework</strong></h4>

<blockquote>
  <ul>
  <li>grape (<a href="https://github.com/intridea/grape">https://github.com/intridea/grape</a>)</li>
  </ul>
</blockquote>

<p>This gem is for adding API to Rails/Sinatra application. <a href="http://intridea.com/about/people/mbleigh">Michael</a> gave people an awesome <a href="http://confreaks.net/videos/475-rubyconf2010-the-grapes-of-rapid">speech in RubyConf2010</a> on his Grape, here I suggest you should watch it to know more details about GRAPE. I believe you will fall in love with it.</p>

<h4><strong>&raquo; Memcached Client</strong></h4>

<blockquote>
  <ul>
  <li>memcache-client (<a href="https://github.com/mperham/memcache-client">https://github.com/mperham/memcache-client</a>)</li>
  <li>dalli (<a href="https://github.com/mperham/dalli">https://github.com/mperham/dalli</a>)</li>
  </ul>
</blockquote>

<p>These two gems are actually mainly written by one same author <em><a href="https://github.com/mperham">Mike Perham</a></em>, he mentioned that <em>Dalli is a high performance pure Ruby client for accessing memcached servers. It works with memcached 1.4+ only as it uses the newer binary protocol. It should be considered a replacement for the memcache-client gem. The API tries to be mostly compatible with memcache-client with the goal being to make it a drop-in replacement for Rails.</em></p>

<h4><strong>&raquo; Deployment and Monitor</strong></h4>

<blockquote>
  <ul>
  <li>capistrano (<a href="https://github.com/capistrano/capistrano">https://github.com/capistrano/capistrano</a>)</li>
  <li>cap-recipes (<a href="https://github.com/nesquena/cap-recipes">https://github.com/nesquena/cap-recipes</a>)</li>
  <li>god (<a href="https://github.com/mojombo/god">https://github.com/mojombo/god</a>)</li>
  </ul>
</blockquote>

<p>I am not a system administrator, so every time talking about the regarding aspects will make me feel silly, I just try to describe tools which can help me out on unfamiliar area, that&#39;s not bad, at least people like me, will do deployment and monitor quickly based on these gems, they do help.</p>

<h4><strong>&raquo; Cron job and Backup as a Pro</strong></h4>

<blockquote>
  <ul>
  <li>whenever (<a href="https://github.com/javan/whenever">https://github.com/javan/whenever</a>)</li>
  <li>backup (<a href="https://github.com/meskyanichi/backup">https://github.com/meskyanichi/backup</a>)</li>
  </ul>
</blockquote>

<p>Above two gems are my favorites, before knowing these two gems, I have to write complex and stupid scripts to do backups that I am not familiar with. Cron job is also a pain in ass if you are not a system administrator. Now time changes, you, as a ruby programmer, can do the corn job and backup in ruby way, surely as a PRO. :)</p>

<h4><strong>&raquo; Testing Gracefully</strong></h4>

<blockquote>
  <ul>
  <li>rspec-rails (<a href="https://github.com/dchelimsky/rspec-rails">https://github.com/dchelimsky/rspec-rails</a>)</li>
  <li>factory_girl_rails (<a href="https://github.com/thoughtbot/factory_girl_rails">https://github.com/thoughtbot/factory_girl_rails</a>)</li>
  <li>faker (<a href="https://github.com/yyyc514/faker">https://github.com/yyyc514/faker</a>)</li>
  <li>watchr (<a href="https://github.com/mynyml/watchr">https://github.com/mynyml/watchr</a>)</li>
  <li>autowatchr (<a href="https://github.com/viking/autowatchr">https://github.com/viking/autowatchr</a>)</li>
  <li>database_cleaner (<a href="https://github.com/bmabey/database_cleaner">https://github.com/bmabey/database_cleaner</a>)</li>
  <li>mail_safe (<a href="https://github.com/myronmarston/mail_safe">https://github.com/myronmarston/mail_safe</a>)</li>
  </ul>
</blockquote>

<p>Testing is always important, I know TDD and BDD are getting more and more popular, that means you have to own your super gun to make it happen. Right, here is a list of gems which can help you out, I didn&#39;t cover all different levels of testing with these gems. Point is, rspec is my favorite framework for testing, <strong>factory_girl</strong> and <strong>faker</strong> are good supports. Anyway, test by your way.</p>

<h4><strong>&raquo; Toolkit</strong></h4>

<blockquote>
  <ul>
  <li>ruby-debug (<a href="https://github.com/mark-moseley/ruby-debug">https://github.com/mark-moseley/ruby-debug</a>)</li>
  <li>hirb (<a href="https://github.com/cldwalker/hirb">https://github.com/cldwalker/hirb</a>)</li>
  <li>cheat (<a href="https://github.com/defunkt/cheat">https://github.com/defunkt/cheat</a>)</li>
  <li>rails-settings-cached (https://github.com/huacnlee/rails-settings-cached)</li>
  </ul>
</blockquote>

<p>There are many handy gems which will give you convenience and power. Take above four as examples, ruby-debuy gives you a chance to check your running applications&#39; context at specific program point; hirb display your AR items in table view in console; cheat makes your terminal working as a pool of other gems&#39; manual; rails-settings-cached is for global configurations in Rails3 application. Yeah, throwing the brick out is to meet your GEMS.</p>

<h3><strong>How to find great gems?</strong></h3>

<p>First, you need to follow up Ryan&#39;s <a href="railscasts.com">railscasts</a>, he is good at introducing new stuff in video. Second, you can go through great open source project&#39;s <strong>Gemfile</strong>, yeah, it&#39;s definitely the best way to come across valuable gems. Third, just subscribe <a href="https://github.com/languages/Ruby">github ruby trends</a> to know what&#39;s going on in Ruby/Rails community. There are also some other involving sites, like <a href="rubygems.org">rubygems</a> and <a href="railsplugins.org">railsplugins</a>, you should take a glance when you free, I bet you will find useful gems.</p>

<p>It&#39;s nearly the end of this post, this topic was originally shared with all Intridea China Team members during last Friday Teahour. You can find the PPT <a href="http://www.slideshare.net/yorzi/riding-on-rails3-with-full-stack-of-gems">here</a>. To share with more people, I turn it into this blog, I must miss many valuable gems in this list, so please comment your thoughts.</p>

</div>

  </article>

  <div class="comments">
    <div id="disqus_thread"></div>
              <script type="text/javascript">
              //<![CDATA[
                  var disqus_shortname = 'andyspersonalblog'; // required: replace example with your forum shortname
                  (function() {
                      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                  })();
              //]]>
              </script>
              <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
              <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </script>
  </div>

      </div>
    </section>

    <footer>
      <div class="copyright">
        <p>&copy;2013 Andy Wang</a></p>
      </div>
    </footer>

    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("UA-11967621-1");
        pageTracker._trackPageview();
      } catch(err) {}
    </script>
  </body>
</html>