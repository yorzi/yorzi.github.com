





<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="zh"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang="zh"><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh"><![endif]-->
<!--[if gt IE 8]<!-->
<html class="no-js" lang="zh">
  <!--<![endif]-->
  <head>
    <meta charset="UTF-8">

    <title>
      Rails Best Practices - @yorzi
    </title>

    <meta name="description" content="安迪的思考和分享">
    <meta name="keywords" content="Remote Working,Project Management,Team Collaboration,Startup,Entrepreneurship,Ruby/Rails,Web Development,生活">
    <meta name="author" content="Andy Wang">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="cleartype" content="on">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <link rel="apple-touch-icon-precomposed" type="image/png" sizes="57x57" href="/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon-precomposed" type="image/png" sizes="72x72" href="/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" type="image/png" sizes="114x114" href="/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" type="image/png" sizes="144x144" href="/apple-touch-icon-144x144-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon-precomposed.png">
    <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">

    <link rel="icon" type="image/png" sizes="16x16" href="/wangyaodi.png">
    <link rel="shortcut icon" sizes="16x16" href="/wangyaodi.png">
    <link rel="alternate" type="application/rss+xml" title="@yorzi's Homepage" href="/feed.xml" />
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" href="/stylesheets/application.css">
    <script src="/javascripts/all.js"></script>
  </head>
  <body class="x2009 x2009_11 x2009_11_09 x2009_11_09_rails-best-practices">
    <aside class="sidebar">
      <h1 class="site-name"><a href="/" style='color:rgb(162, 9, 9);'>@yorzi</a></h1>
      <nav class="global-nav">
        <ul>
          <li><a href="/profile.html">About</a></li>
          <li><a href="/presentations.html">Presentations</a></li>
          <li><a href="/files/2013-Andy-Wang-Resume-Via-Linkedin.pdf">Resume</a></li>
        </ul>
      </nav>

      <nav class="social-connect">
        <ul>
          <li><a href="//github.com/yorzi"><i class="icon-github"></i></a></li>
          <li><a href="//weibo.com/yorzi"><i class="icon-weibo"></i></a></li>
          <li><a href="//twitter.com/yorzi"><i class="icon-twitter"></i></a></li>
          <li><a href="//cn.linkedin.com/in/yorzi"><i class="icon-linkedin"></i></a></li>
        </ul>
      </nav>

      <!-- Ad -->
      <div class="block ad">
        <p class="block-cnt">Themed By</p>
        <h4 class="block-title"><a href="//fengche.co">风车</a></h4>
      </div>

    </aside>

    <section class="main">
      <div class="container">
        
  <div class="announcement">
    <p>
        <img class="avatar" src="/images/wangyaodi.png" alt="Andy Wang" />
为了练习写作，我开了一个微信公众号<a href='/2015/10/25/why-to-practise-writing-an-article.html'>【爱成长】</a>，每篇Blog都会同步在该公众号中发布，请感兴趣的朋友关注我的微信公众号，微信ID：i-chengzhang 谢谢！


    </p>
  </div>

  <article class="post single">

    <header>
  <h2 class="title">
    <a href="/2009/11/09/rails-best-practices.html">Rails Best Practices</a>
  </h2>
</header>

<aside class="aside-block">
  <ul class="meta">
    <li class="date">
      Nov 09, 2009
    </li>
    <li class="tags">
    </li>
  </ul>
</aside>

<div class="content">
  <p>Quote from Gary&rsquo;s weekly code review post, thanks to Gary Zhang.
<blockquote>
all advises on Ruby on Rails code:</p>
<pre class="highlight plaintext"><code>* Lesson 1. Move code from Controller to Model
  1. Move finder to named_scope
  2. Use model association
  3. Use scope access
  4. Add model virtual attribute
  5. Use model callback
  6. Replace Complex Creation with Factory Method
  7. Move Model Logic into the Model
  8. model.collection_model_ids (many-to-many)
  9. Nested Model Forms (one-to-one)
  10. Nested Model Forms (one-to-many)

* Lesson 2. RESTful Conventions
  1. Overuse route customizations
  2. Needless deep nesting
  3. Not use default route

* Lesson 3. Model
  1. Keep Finders on Their Own Model
  2. Love named_scope # same as Move finder to named_scope
  3. the Law of Demeter
  4. DRY: metaprogramming
  5. Extract into Module
  6. Extract to composed class
  7. Use Observer

* Lesson 4. Migration
  1. Isolating Seed Data
  2. Always add DB index

* Lesson 5. Controller
  1. Use before_filter
  2. DRY Controller

* Lesson 6. View
  1. Move code into controller
  2. Move code into model
  3. Move code into helper
  4. Replace instance variable with local variable
  5. Use Form Builder
  6. Organize Helper files
</code></pre>

<p>I think all these advises are very useful for our farther refactor on our system.</p>

<p>There is a very cool gem to check code according these advises(Sources : <a href="http://github.com/flyerhzm/rails_best_practices">Rails Best Practices</a>)</p>

<p>install:
sudo gem install rails<em>best</em>practices &ndash;source <a href="http://gemcutter.org">http://gemcutter.org</a></p>

<p>usage:
in rails rails app, run &ldquo;rails<em>best</em>practices .&rdquo; (don&rsquo;t forget the parameter: &ldquo;.&rdquo;)
</blockquote></p>

<p>Not try this tool yet, but it looks really handy.</p>

</div>

  </article>

  <div class="comments">
    <div id="disqus_thread"></div>
<script type="text/javascript">
//<![CDATA[
                  var disqus_shortname = 'andyspersonalblog';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

  </div>

      </div>
    </section>

    <footer>
      <div class="copyright">
        <p>&copy;2015 Andy Wang</a></p>
      </div>
    </footer>

    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("TOBEADD");
        pageTracker._trackPageview();
      } catch(err) {}
    </script>
  </body>
</html>